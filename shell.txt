#docker 镜像/容器名字或者jar名字 这里都命名为这个
SERVER_NAME=rhmg-commission
#容器id
CID=$(docker ps -a | grep "$SERVER_NAME" | awk '{print $1}')
#镜像id
IID=$(docker images | grep "none" | awk '{print $3}')

# 删除docker容器
if [ -n "$CID" ]; then
        echo "存在$SERVER_NAME容器，CID=$CID"
        docker stop $CID
        docker rm $CID
else
        echo "不存在$SERVER_NAME容器"
fi

# 删除docker镜像
if [ -n "$IID" ]; then
        echo "存在无用镜像，IID=$IID"
        docker rmi $IID
else
        echo "不存在已废弃镜像"
fi

# 运行docker容器
docker run --name $SERVER_NAME -d -p 9026:9026 -v /opt/rhmg:/opt/rhmg $SERVER_NAME
echo "$SERVER_NAME容器创建完成"